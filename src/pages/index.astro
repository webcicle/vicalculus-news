---
import Layout from '../layouts/Layout.astro';
import client from '../client/sanity';
import groq from 'groq';
import ArticlePreview from '../components/ArticlePreview.astro';

const postQuery = groq`*[_type == "post"]{
  publishedAt,
  summary,
  _id,
  "author": author->name,
  "categories": categories[]->title,
  "mainImg": mainImage,
  "slug": slug.current,
  title,
}`;
const posts = await client.fetch(postQuery);
---

<Layout title='Vicalculus News - Mostly opinions'>
	{
		posts.map((post: any) => {
			return <ArticlePreview post={post} />;
		})
	}
</Layout>
